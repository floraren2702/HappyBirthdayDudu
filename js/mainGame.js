const gameData = {
    "1": {
        "text": "Dudu wakes up in his bed as a cute tiny lil cat ğŸ±. Dudu doesn't understand what's happening???",
        "image" : "smaller_images/cat_in_bed.png",
"choices": {
            "Dudu tries to scream for helpâ€¦ but it comes out as a squeaky â€˜meow?â€™ and Dudu startles himself ğŸ«¨.": [2,["Dumdum Dudu"]],
            "Dudu attempts to test his new cat abilities: he sniffs everything, chases his own tail, does tiny parkour in his room ğŸˆ.": [2,["Crazy Scientist Dudu"]],
            "Dudu thinks he's still eeping and tries to find his Bubu in his dream ğŸ˜´.": [2,["Sunshine Dudu", "Superhero Dudu"]],
            "Dudu feels a bit overwhelmed so Dudu goes back to bed, wraps himself in a blanket burrito and falls asleep immediately ğŸ›ŒğŸ».": [2,["Eepy Dudu", "Chef Dudu"]]
        }
    },

    "2": {
        "text": "Bubu hasn't heard from her Dudu in 2 days and is very worried ğŸ¥º when a cat shows up at her door. Dudu is trying to get Bubu to understand it's him.", 
        "image" : "smaller_images/cat_at_door.png",
"choices": {
            "Dudu rubs against Bubu so his Bubu can recognize his smell ğŸ¥°.": [3,["Babie Dudu"]],
            "Dudu says I love you in meow meow language ğŸ¥¹.": [3,["Soulmate Dudu", "Sunshine Dudu"]],
            "Dudu writes a cereal ğŸ¥£ message on the floor but it looks like nonshense.": [3, ["Chef Dudu", "Crazy Scientist Dudu"]],
            "Dudu tries to lick ğŸ‘… bubi and bubio and rests his face on his Bubuâ€™s chest.": [3, ["Daddy Dudu", "Diva Dudu"]]
        }
    },

    "3": {
        "text": "Bubu finally recognizes her mignon Dudu ğŸ©µ.",
        "image" : "smaller_images/cat_in_Bubu_arms.png",
"choices": {
            "Dudu and his Bubu cuddle in bed watching Tom ğŸˆâ€â¬› and Jerry ğŸ¹ happily because Dudu is the softesttt (and Dudu can relate to Tom).": [4,["Babie Dudu"]],
            "Dudu and his Bubu immediately go to the library ğŸ“š to borrow all the sorcery and magik books we can find to turn Bubu into a cat too.": [5,["Soulmate Dudu"]],
            "Dudu and his Bubu create a Tiktok account ğŸ“± for Duduella, the most fabulous cat Dudu.": [6,["Diva Dudu"]],
            "Dudu and his Bubu go shopping for milk because Dudu is a thirsty pooki ğŸ¼.": [7,["Chef Dudu"]]
        }
    },

    "4": {
        "text": "Dudu and his Bubu fall asleep in each otherâ€™s arms after spending all day in bed ğŸ’¤. The next morning: ",
        "image" : "smaller_images/cat_eeping.png",
"choices": {
            "Dudu has to poop poop ğŸ’©. Dudu rushes to the toilet and tries to poop poop but Dudu falls in the toilet bowl.": [8,["Dumdum Dudu"]],
            "Dudu wants to make breakfast for his Bubu so Dudu does a Ratatouille, climbs on Bubuâ€™s head and cooks in the kitchen by pulling on Bubuâ€™s hair ğŸ‘©â€ğŸ³.": [9,["Chef Dudu"]],
            "Dudu asks his Bubu to write an email ğŸ“§ to his work and tell them Dudu cannot go to da office for the next few days .": [10,["Diva Dudu"]],
            "Dudu wakes up before his Bubu, gets overwhelmed with love, and starts giving Bubu one million tiny cat kisses until Bubu wakes up giggling ğŸ’•.": [11,["Soulmate Dudu", "Sunshine Dudu"]]
        }
    },

    "5": {
        "text": "Itâ€™s late, Dudu and Bubu spent the last 8 hours reading magik books ğŸ“– in the library.",
        "image" : "smaller_images/cat_reading.png",
"choices": {
            "The library is almost empty, Dudu and Bubu sneak to the bathroom to do naughty naughty things ğŸ˜ˆ.": [12,["Daddy Dudu"]],
            "Dudu keeps working and ends up pulling an all-nighter trying to find a way to turn Bubu into a cat so we can be two cute cat pookis forever ğŸ±ğŸ±.": [13,["Soulmate Dudu", "Superhero Dudu"]],
            "Dudu finally found an ancient potion ğŸµ to turn Bubu into a cat but the recipe has mushrooms, durian, guava, cilantro so Dudu has to find a way to trick Bubu into drink it.": [14,["Chef Dudu", "Crazy Scientist Dudu"]],
            "Dudu falls asleep on Bubuâ€™s lap in the library because cat Dudu needs even more eep than hooman Dudu ğŸ¥±. Dudu magically arrives home (Bubu carried him home).": [15,["Eepy Dudu"]]
        }
    },

    "6": {
        "text": "Duduella is going viral on Tiktok ğŸ˜. Dudu gets contacted by entertainment agencies who want to sign him.",
        "image" : "smaller_images/cat_fame.png",   
"choices": {
            "Dudu panics because choosing one company feels like choosing his destiny. He hides under a blanket until Bubu brings emotional support snacks ğŸ™.": [16,["Babie Dudu", "Eepy Dudu"]],
            "Dudu signs with Hybe Entertainment in the hopes of meeting Le Sserafim ğŸ«°.": [16,["Dumdum Dudu", "Diva Dudu"]],
            "Dudu picks the company with the highest-paying contract so Dudu can showa his Bubu with gifts ğŸ’.": [16, ["Daddy Dudu"]],
            "Dudu doesnâ€™t want to sign with a company because Dudu doesnâ€™t care about fame and money ğŸ’¸ and prefers producing homemade videos and simply having fun with his Bubu.": [15, ["Soulmate Dudu"]]
        }
    },

    "7": {
        "text": "Dudu and his Bubu arrive at the supermarket ğŸ›’.",
        "image" : "smaller_images/cat_supermarket.png",
"choices": {
            "Dudu gets completely overwhelmed by the people and noises, so Dudu hides ğŸ«£ inside Bubuâ€™s hoodie the entire time and refuses to come out.": [17, ["Babie Dudu"]],
            "Dudu escapes Bubuâ€™s arms and sprints to the snack aisle ğŸª. Dudu wants potato chips and cola NOW and knocks several things onto the floor in the process.": [17, ["Dumdum Dudu", "Diva Dudu"]],
            "Dudu secretly steals Bubuâ€™s favorite chocolate to surprise Bubu ğŸ«.": [17, ["Sunshine Dudu"]],
            "Dudu confidently slaps his credit card ğŸ’³ on the counter without looking at the total because it's always DUDU'S TREAT.": [17, ["Daddy Dudu"]]
        }
    },

    "8" :{
        "text": "Dudu is covered in toilet water ğŸš½.",
        "image" : "smaller_images/cat_toilet.png",
"choices": {
            "Dudu tries to climb out but slips back in, creating a tsunami of toilet water all over Bubuâ€™s bathroom. Dudu lets out a dramatic â€œmeow helpâ€, Bubu scoops him out with a towel ğŸ§– as Dudu demands a nice warm bath immediately.": [18, ["Diva Dudu"]],
            "Dudu successfully climbs out using his rock-hard abs and agility. NINJA DUDU ğŸ¥·! Dudu comes out with wet hair and a towel around his waist.": [15, ["Superhero Dudu", "Daddy Dudu"]],
            "Dudu notices something at the bottom of the toilet blocking the pipe and of course, Dudu fixes it for his Bubu ğŸª .": [15, ["Daddy Dudu", "Crazy Scientist Dudu"]],
            "Dudu stays in the toilet bowl. Dudu just wants to give up. Life is too hard ğŸ˜. Hmphhh.": [15, ["Babie Dudu"]]
        }
    },

    "9" :{
        "text" : "Dudu and his Bubu cook an omelette ğŸ³ and pancakes ğŸ¥.",
        "image" : "smaller_images/cat_cooking.png",
"choices": {
            "Dudu guides Bubu flawlessly, and together they create a Michelin-star breakfast. Carmi could never. Dudu puffs his chest proudly like the tiny chef he is ğŸ‘¨â€ğŸ³.": [15, ["Chef Dudu"]],
            "Dudu pulls Bubuâ€™s hair too hard, making Bubu accidentally yeet an egg ğŸ¥š across the kitchen. It lands on the floor. Dudu blames gravity.": [19, ["Dumdum Dudu", "Crazy Scientist Dudu"]],
            "Dudu dozes off and the pan starts smoking ğŸ’¨ğŸ’¨. The fire alarm starts ringing. Dudu starts meowing loudly in panik.": [20, ["Eepy Dudu"]],
            "While Bubu is kneading the pancake dough, Dudu is kneading some other pancakesâ€¦ğŸ‘": [21, ["Daddy Dudu"]]
        }
    },

    "10" :{    
        "text": "What does dudu write in his â€œout of officeâ€ email ğŸ’»?",
        "image" : "smaller_images/cat_laptop.png",
"choices": {
            "â€œDue to a temporary feline transformation, I will be working from home (the bed). Thank you for your understanding.â€ Dudu insists on attaching a selfie ğŸ¤³ of himself as a cat as proof.": [15, ["Diva Dudu"]],
            "â€œDudu is emotionally distressed. Dudu is smol ğŸ¥º. Thank you for respecting Duduâ€™s boundaries during this difficult time.â€": [15, ["Babie Dudu"]],
            "â€œDudu has a cold ğŸ¤§ and will present tomorrow with the camera off. Please do not worry.â€": [15, ["Daddy Dudu"]],
            "Dudu gets distracted by his beautiful Bubu. Dudu starts writing about how much he loves his Bubu, and almost sends a love letter ğŸ’Œ about Bubu to his boss.": [15, ["Soulmate Dudu", "Sunshine Dudu"]]
        }
    },

    "11": {
        "text": "Bubu finally wakes up from Duduâ€™s one-million tiny kisses ğŸ’.",
        "image" : "smaller_images/cat_kiss.png",
"choices": {
            "Dudu gently takes Bubuâ€™s face in his tiny paws, whispers â€œgood meowrning ma pooki,â€ and places a soft forehead kiss on Bubuâ€™s nose ğŸ½.": [15, ["Sunshine Dudu", "Soulmate Dudu"]],
            "Dudu stares at Bubu intensely and starts wondering if the amount of love he feels is scientifically measurable ğŸ§®.": [15,["Crazy Scientist Dudu"]],
            "Dudu decides his mission for the day is to make Bubu smile as much as possible and immediately starts planning acts of service. First, bring princess Bubu her water ğŸš°.": [15,["Superhero Dudu", "Chef Dudu"]],
            "Dudu immediately curls up on Bubuâ€™s chest like a warm croissant ğŸ¥ and requests neverending cuddles.": [15, ["Babie Dudu"]]
        }
    },

    "12" : {
        "text": "After their â€œwholesomeâ€ bathroom moment ğŸ˜, Dudu and his Bubu try to act normal as they exit the toilet.",
        "image" : "smaller_images/cat_naughty.png",
"choices": {
            "Dudu and Bubu rush home ğŸ  to finish what they started hehehe.": [21,["Daddy Dudu"]],
            "Dudu suddenly becomes extremely sleepy after all the excitement and curls up on Bubuâ€™s lap ğŸ‘©â€ğŸ¼ between the library books. Dudu magically arrives home (Bubu carried him home).": [15, ["Eepy Dudu"]],
            "Dudu starts panicking, convinced that the library security guards ğŸ‘®ğŸ‘® now what happened. Dudu and Bubu run home before they get told off.": [15,["Dumdum Dudu"]],
            "Dudu and his Bubu resume their research like good pookis. Dudu canâ€™t find a spell to turn Bubu into a cat but Dudu finds a spell to turn back into a hooman ğŸ”™ğŸ§. But the recipe requires a big sacrifice. Dudu has to give up his Daddy Yoshi.": [22,["Superhero Dudu", "Crazy Scientist Dudu"]]
        }
    },
    "13" : {
        "text": "Dudu manages to create a Catify-Pooki machine ğŸ“ .",
        "image" : "smaller_images/cat_machine.png",
"choices":{
            "Dudu paniks and says â€œWaitâ€¦ what if it turns you into a boba tea ğŸ§‹? Or a Tesla ğŸï¸? Or fried chicken ğŸ—? Or nothing at all? What if you disappear? BUBU WE NEED A BACKUP PLAN.â€": [23, ["Dumdum Dudu"]],
            "Dudu bounces excitedly and says, â€œBUBU BUBU BUBU!!! If this works we can be two cute pookis forever!!! YAYAYAYAYAYAYAY ğŸ˜ğŸ˜ğŸ˜!!!â€": [23, ["Sunshine Dudu"]],
            "Dudu gently cups Bubuâ€™s face and says, â€œEven if you never turn into a cat, you are still my pooki forever â™¾ï¸.â€": [23, ["Soulmate Dudu"]],
            "Dudu puts on his glasses and says, â€œStatistically speaking, there is only a 69% chance of catastrophic failure, ackshually ğŸ¤“. Those are great odds. Letâ€™s begin.â€": [23, ["Crazy Scientist Dudu"]]
        }
    },
    "14": {
        "text": "Dudu prepares the transformation potion, but Bubu finds it sus. How does Dudu convince Bubu to drink ğŸ¤”?",
        "image" : "smaller_images/cat_potion.png",
"choices": {
            "Dudu says in a deep meow voice, â€œBe a good girl and drink it.â€ Bubu drinks immediately because Dudu is too hawt ğŸ«¦.": [24,["Daddy Dudu"]],
            "Dudu bounces around holding the potion saying, â€œBUBU TRY IT TRY IT TRY IT!! I MADE IT FOR YOU!!â€ His excitement is so cute that Bubu drinks just to make him happy ğŸ¥°ğŸ¥°.":[24,["Sunshine Dudu"]],
            "Dudu panics and whispers, â€œIf you donâ€™t drink it we will never be two cat pookis and Iâ€™ll have to live alone as a cat and maybe youâ€™ll forget me and get a normal human-sized boyfriend like Carson andâ€”ğŸ« â€ Bubu drinks to calm him down.": [24,["Babie Dudu"]],
            "Dudu turns the potion into a delicious beef stew inside a beautiful bowl that looks sho gourmet ğŸ² that Bubu's salivating just looking at it.": [24, ["Chef Dudu"]]
        }
    },
    "15" : {
        "text": "After many many many many cuddles in bed after a tiring day, Dudu and Bubu are in the mood to play shome Mario Kart ğŸ®.",
        "image" : "smaller_images/cat_switch.png",
"choices": {
            "Dudu immediately falls asleep on the controller. The race hasnâ€™t even started yet ğŸ.": [25, ["Eepy Dudu"]],
            "Dudu insists on sitting on his Bubuâ€™s lap so they can be a team. If they lose, itâ€™s still a win because theyâ€™re together ğŸ«¶.": [25, ["Soulmate Dudu", "Sunshine Dudu"]],
            "Dudu trash-talks nonstop, steals first place at the last second, and declares himself the ultimate Mario Kart champion ğŸ.": [25, ["Diva Dudu"]],
            "Dudu studies the track, chooses the optimal kart combo, and finds the secret passage for a guaranteed win ğŸ†.â€": [25, ["Crazy Scientist Dudu", "Superhero Dudu"]]
        }
    },

    "16": {
        "text": "Against all odds, Dudu debuts as a Cat-Pop idol ğŸŒŸ. His debut song, â€œBBU-BU BBU-BU,â€ ğŸ¤ explodes overnight. Soon enuf, Dudu's performing at Prudential Center.",
        "image" : "smaller_images/cat_concert.png",
"choices": {
            "Dudu panics backstage, grabs his Bubuâ€™s hand, and sneaks out mid-concert to go home, cuddle, and disappear from the world ğŸ§. MIUUUUUUUU": [26, ["Babie Dudu"]],
            "Dudu stays at the venue longer than planned to meet his fans, the Pawfects, sign autographs, and take pictures ğŸ“·.": [26,["Superhero Dudu"]],
            "Dudu leans fully into idol mode: extra choreography ğŸ•º, playful fan service, aegyo, and a perfectly timed wink at the camera.": [26, ["Diva Dudu", "Daddy Dudu"]],
            "Dudu's exhausted after his performance and rushes home to make his favourite ramen ğŸœ and tuck himself into bed.": [26, ["Eepy Dudu", "Chef Dudu"]]
        } 
    },

    "17": {
        "text": "Dudu and his Bubu walk home from the grocery store ğŸš¶â€â™€ï¸ğŸˆ.",
        "image" : "smaller_images/cat_street.png",
"choices": {
            "Dudu offers to carry all the bags and manages to lift them with his tail ğŸ›ï¸.": [27, ["Superhero Dudu"]],
            "Dudu jumps on his Bubu's shoulder and rests there until they're home ğŸ’â€â™€ï¸ğŸˆ.": [27, ["Eepy Dudu", "Babie Dudu"]],
            "Dudu gets distracted by literally everything, birds ğŸ¤, leaves ğŸ‚, puddles. Bubu has to stop every five steps to fetch her Dudu.": [27, ["Dumdum Dudu"]],
            "Dudu walks in front of his Bubu the entire time, stopping dramatically to check that the path is safe ğŸ™….": [27, ["Daddy Dudu", "Diva Dudu"]]
        }
    },

    "18" : {
        "text": "Dudu is soaking in a warm bath ğŸ› with his Bubu.",
        "image" : "smaller_images/cat_bath.png",
"choices": {
            "Dudu clears his throat politely and asks, very sweetly, if Bubu could help wash his back ğŸš¿ just a lil.": [15, ["Babie Dudu"]],
            "Dudu immediately relaxes too much, melts into the water ğŸ˜¶â€ğŸŒ«ï¸, and starts dozing off mid-bath.": [15, ["Eepy Dudu"]],
            "Dudu gets distracted by the bubbles ğŸ«§, starts popping them excitedly, and accidentally splashes water everywhere.": [15, ["Dumdum Dudu"]],
            "Dudu starts playing with Bubu's pussy pussy pussy underneath the soap and bubbles, acting all innochent ğŸ˜‡.": [15, ["Daddy Dudu"]]
        }
    },
    
    "19":{
        "text": "â€œDudu and his Bubu have to clean the apartment after the chaos in the kitchen ğŸ§¹.â€",
        "image" : "smaller_images/cat_cleaning.png",
"choices" : {
            "Dudu volunteers to wash the dishes ğŸ§½. Dishwasher Dudu at your service ğŸ«¡.": [15, ["Chef Dudu", "Sunshine Dudu"]],
            "Dudu decides his fur is the perfect cleaning tool and starts wiping the floor by rolling himself across the apartment ğŸˆ.": [15, ["Dumdum Dudu"]],
            "Dudu insists this is his fault and bravely cleans the entire apartment so princess Bubu doesnâ€™t have to lift a finger ğŸ§¼.": [15, ["Superhero Dudu", "Soulmate Dudu"]],
            "Dudu gets tired halfway through and curls up on a clean towel, claiming emotional support is also helping ğŸ˜ŒğŸ˜Œ.": [15, ["Eepy Dudu", "Diva Dudu"]]
        }
    },

    "20" :{
        "text": "The fire alarm is blaring ğŸ”¥ğŸ”¥ğŸ”¥. Dudu is wide awake now and full of regret.",
        "image" : "smaller_images/cat_alarm.png",
"choices" : {
            "Dudu panics ğŸ™€, runs in tiny circles, and meows as loudly as possible until Bubu saves the situation.": [15, ["Dumdum Dudu"]],
            "Dudu bravely jumps into action, grabs the fire extinguisher ğŸ§¯, opens all the windows, and stops the alarm.": [15,["Superhero Dudu"]],
            "Dudu clings to Bubu like a koala ğŸ¨, apologizing repeatedly ğŸ™‡ and promising to never eep while cooking again.": [15, ["Babie Dudu"]],
            "Dudu solemnly promises to make it up to Bubu with the best meal of her life ğŸ£ once the kitchen survives.": [15, ["Chef Dudu"]] 
        }
    },

    "21":{
       "text": "Dudu and his Bubu start exercising on da bed ğŸ†.",
        "image" : "smaller_images/cat_exercise.png",
"choices":{
            "Even as a tiny cat, Dudu proves he is still extremely capable ğŸ’ª, especially when it comes to licking ğŸ‘…. Mission accomplished.": [15, ["Superhero Dudu", "Daddy Dudu"]],
            "Dudu dramatically overestimates his stamina and needs a cuddle break halfway through ğŸ˜ª.": [15, ["Babie Dudu", "Eepy Dudu"]],
            "Dudu looks into Bubu's eyes and meows â€œI lob u <3â€ â¤ï¸â€ğŸ”¥": [15, ["Soulmate Dudu"]],
            "Dudu gets distracted by his own tail and forgets what they were doing ğŸ¤ .": [15, ["Dumdum Dudu"]]
       } 
    },

    "22": {
        "text": "The room goes quiet. Daddy Yoshi sits on the table between them, glowing faintly as the spell waits to be completed ğŸª„.",
        "image" : "smaller_images/cat_yoshi.png",
"choices":{
            "Dudu takes a deep breath, hugs Daddy Yoshi ğŸ¦– one last time, and places him into the spell circle.": [28, ["Superhero Dudu"]],
            "Dudu grabs the books again, muttering formulas and percentages â–â—ğŸŸ°â•. There has to be a loophole. ": [28, ["Crazy Scientist Dudu"]],
            "Dudu pulls Daddy Yoshi close and starts crying in Bubu's arms ğŸ˜­.": [28, ["Babie Dudu"]],
            "Dudu tidies the table and says they shouldnâ€™t make big decisions on an empty stomach ğŸ˜‹.": [28, ["Chef Dudu"]]
        }
    },

    "23": {
        "text": "Dudu and Bubu finally decide to activate the machine ğŸ° together.",
        "image" : "smaller_images/cat_button.png",
"choices": {
            "Dudu scans the controls one last time and says, â€œAll readings look good ğŸ§‘â€ğŸ«. Letâ€™s do this.â€": [29, ["Crazy Scientist Dudu"]],
            "Dudu laughs nervously and says, â€œIf we explode, at least we explode together ğŸ’£.â€": [29, ["Sunshine Dudu", "Dumdum Dudu"]],
            "Dudu holds Bubu's hand and says â€œNo matter what happens, you know that Dudu will always lob you ğŸ‘‰ğŸ‘ˆ.â€": [29, ["Soulmate Dudu"]],
            "Dudu squints at the machine and says, â€œThis better not be our villain origin story ğŸ‘¿.â€": [29, ["Diva Dudu"]]
        }
    },

    "24": {
        "text": "Bubu takes a sip. Thereâ€™s a dramatic pauseâ€¦ then POOF ğŸ’¥! A cloud of sparkles fills the room.",
        "image" : "smaller_images/poof.png",
"choices": {
            "Dudu shields ğŸ›¡ï¸ Bubu dramatically, ready to protect her from whatever comes next.": [30, ["Superhero Dudu"]],
            "Dudu squints through the sparkles, already analyzing whether the transformation looks scientifically correct ğŸ”.": [30, ["Crazy Scientist Dudu"]],
            "Dudu gasps, covers his eyes, and peeks through his lil paws. This is too scawy ğŸ˜°.": [30, ["Babie Dudu"]],
            "Dudu takes out his phone and starts posting on his IG live ğŸ˜°.â€": [30, ["Diva Dudu"]]
        }
    },

    "25": {
        "text": "After playing for hours, the screen suddenly glitches. A new track unlocks: BubuDuduLand. The music is soft. The sky is pink ğŸ†. Everything feels strangely familiar.",
        "image": "smaller_images/BubuDuduLand.png",
"choices": {
            "Dudu's excited to try a new Mario Kart track ğŸ›¤ï¸ for free and presses PLAY immediately.": [31, ["Sunshine Dudu"]],
            "Dudu stares at the screen, realizing this place feels like home ğŸ  somehow.": [31, ["Soulmate Dudu"]],
            "Dudu analyzes the track and notices it was designed specifically for them. It has all the spots where Dudu and his Bubu spent time together in Oxford, London, and New YorkğŸ‡¬ğŸ‡§ğŸ‡ºğŸ‡¸.": [31, ["Crazy Scientist Dudu"]],
            "Dudu shrugs and says, â€œYo. Whatever this is, Iâ€™m winning ğŸ¥‡, bro.â€": [31, ["Diva Dudu"]]
        }
    },

    "26": {
        "text": "Dudu's sho popular Dudu wins Rookie of the Year. But as he becomes more famous, a sasaeng begins following him everywhere and threatening his Bubu â˜ ï¸.",
        "image": "smaller_images/cat_incognito.png",
"choices": {
            "Dudu panics, grabs his Bubu, and decides they have to disappear together ğŸ«¥ğŸ«¥. Nothing matters more than keeping Bubu safe.": [32, ["Soulmate Dudu"]],
            "Dudu stays calm, documents everything, and reports it to the police ğŸš“, determined to protect both Bubu and the Pawfects from this dangerous individual.": [32, ["Superhero Dudu"]],
            "Dudu insists on laying low at home, cooking comfort food for Bubu and saying theyâ€™ll figure things out safely from there ğŸšï¸.": [32, ["Chef Dudu"]],
            "Dudu starts sketching ideas for a complete identity reset ğŸªª.": [32, ["Crazy Scientist Dudu"]]
        }
    },

    "27": {
        "text": "Back home at last, Dudu and Bubu set the groceries down ğŸ‘ğŸ‘.",
        "image": "smaller_images/cat_bag.png",
"choices": {
            "Dudu hops onto the counter and announces itâ€™s time to cook something warm and comforting together ğŸ½ï¸.": [9, ["Chef Dudu"]],
            "Dudu curls up on the kitchen counter, ready for a nap ğŸ˜´.": [9, ["Eepy Dudu"]],
            "Dudu puts away all the groceries before Bubu even has time to remove her shoes ğŸ‘Ÿ.": [9, ["Superhero Dudu"]],
            "Dudu gives each ingredient ğŸ§ˆğŸ§‚ a tiny pat like he's saying hello.": [9, ["Dumdum Dudu"]]
        }
    },

    "28": {
        "text": "After saying his final goodbyes to Daddy Yoshi, Dudu completes the spell. The room begins to glow brighter and brighterğŸŒ…, until everything turns white. \
        When the light fades, Dudu realizes something: the spell didnâ€™t do what he asked, instead it granted his greatest wish, for Dudu and his Bubu to be Pooki Wooki Bears. Together. Forever.",
        "image": "smaller_images/icon.png",
"choices": {
    "Dudu and Bubu lived happily ever after!": [0, []]
        }
    },

    "29": {
        "text": "The machine whirs to life. Lights flash, gears spin, and the hum grows louder and louder until the room is swallowed in light ğŸ‡. \
        When the light fades, Dudu looks over at Bubu but SHE'S NOT A CAT. They made a mistake in the calculations. \
        Bubu transformed into a Pooki Wooki Bubu Bear instead?!?! Bubu looks over at Dudu and notices that he transformed as well, into a Pooki Wooki Dudu Bear. \
        Dudu and Bubu are Pooki Wooki Bears. Together. Forever.",
        "image": "smaller_images/icon.png",
"choices": {
    "Dudu and Bubu lived happily ever after!": [0, []]
        }
    },
    
    "30": { 
        "text": "The âœ¨ sparkles âœ¨ slowly settle. The room is quiet. Dudu opens his eyes first and freezes. \
        Bubu is no longer human. Sheâ€™s round, fluffy, and glowing softly. A Pooki Wooki Bear. \
        Bubu is scawed and Dudu gives her a reassuring kith.\
        Some of the potion transfers to Dudu's lips and Dudu realizes Dudu transformed into a Pooki Wooki Bear too. \
        Dudu and Bubu are Pooki Wooki Bears. Together. Forever.",
        "image": "smaller_images/icon.png",
  "choices": {
    "Dudu and Bubu lived happily ever after!": [0, []]
        }
    },
 
    "31": {
        "text": "The race begins. But something feelsâ€¦ different. \
        Familiar places pass by, Dudu recognizes Keble college's red bricks, the eels from Taberu are floating in the air, the bridge ğŸŒ‰ where Dudu first said â€œI like youâ€¦â€, Seoul Bakery, Niagara Falls, an ice-skating rink, Chez Papa, the Belasco Theatre. \
        Dudu and Bubu's memories folded into the road itself. \
        Far ahead Dudu notices places he's never seen before and can't wait to explore. \
        Dudu and Bubu donâ€™t feel like theyâ€™re playing anymore. \
        It feels like theyâ€™ve arrived. \
        The screen slowly fades to white. \
        A soft prompt appears: \
        â€œWould you like to stay in BubuDuduLand forever?â€ \
        Dudu and Bubu look at each other. \
        They donâ€™t even hesitate. \
        Dudu and Bubu press YES at the exact same time.",
        "image": "smaller_images/icon.png",
"choices": {
    "Dudu and Bubu lived happily ever after in BubuDuduLand!": [0, []]
        }
    },

    "32": {
        "text": "Using the fortune Dudu earned as a Cat-Pop idol, Dudu and Bubu make the decision to disappear ğŸ‘» from the spotlight ğŸŒŸ. \
        With the help of the most advanced (and slightly ridiculous) plastic surgery technology ever created, they shed their old identities. \
        They reemerge as two soft, anonymous, perfectly adorable Pooki Wooki Bears who can be together, forever.",
        "image": "smaller_images/icon.png",
"choices": {
    "Dudu and Bubu lived happily ever after": [0, []]
        }
    },
};

const personalities = {
  "Daddy Dudu": 0,
  "Eepy Dudu": 0,
  "Sunshine Dudu": 0,
  "Crazy Scientist Dudu": 0,
  "Superhero Dudu": 0,
  "Dumdum Dudu": 0,
  "Babie Dudu": 0,
  "Chef Dudu": 0,
  "Diva Dudu": 0,
  "Soulmate Dudu": 0
};

let currentState = 1;

function renderState(state) {
    const storyText = document.getElementById('story-text');
    const storyImage = document.getElementById('story-image');
    const choicesContainer = document.getElementById('choices');

    const img = new Image();
    img.src = gameData[state].image;

    img.onload = () => {
        storyImage.src = img.src;
        storyText.textContent = gameData[state].text;
        choicesContainer.innerHTML = '';

        for (const [choice, info] of Object.entries(gameData[state].choices)) {
            const button = document.createElement('button');
            button.textContent = choice;
            button.className = 'choice-button';
            let nextState = info[0];
            button.onclick = () => changeState(nextState, info[1]); //each time you change state you update the personalities dictionary
            choicesContainer.appendChild(button);
        }
    };
}


function changeState(newState, selectedPersonalities) { 
    // console.log(personalities); 
    selectedPersonalities.forEach(personality => {
        personalities[personality]++;
    });

    currentState = newState;

    if (currentState === 0) {
        revealMostSelectedDudu();
    } else {
        renderState(currentState);
    }
}
function revealMostSelectedDudu() {
    let maxCount = 0;
    let maxDudu = '';

    for (const [Dudu, count] of Object.entries(personalities)) {
        if (count > maxCount) {
            maxCount = count;
            maxDudu = Dudu;
        }
    }

    const storyImage = document.getElementById('story-image');
    const text = document.getElementById('story-text');
    const choicesContainer = document.getElementById('choices');
    const DuduImagePath = `smaller_images/id_cards/${maxDudu}.png`;

    // Preload the image
    const img = new Image();
    img.src = DuduImagePath;
    img.className = 'responsive-image'; 

    // Once the image is loaded, update the DOM
    img.onload = () => {
        storyImage.style.display = 'none';
        choicesContainer.style.display = 'none';
    
        text.textContent = "HAPPY BIRTHDAY MA POOKI!! Drumroll... here is your Dudu ID! (Right click or hold the image to save)";
        text.appendChild(img);
    };
}


function startGame() {
    document.querySelector('.title').style.display = 'none';
    document.getElementById('homescreen').style.display = 'none';
    document.querySelector('.start-button').style.display = 'none';
    document.getElementById('game-container').style.display = 'block';
    renderState(currentState);
}

window.onload = () => {
    renderState(currentState);
};
